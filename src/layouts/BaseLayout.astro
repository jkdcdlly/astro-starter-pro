---
interface Props {
    title?: string;
    description?: string;
    ogImage?: string;
    canonical?: string;
    metadata?: {
        title?: string;
        description?: string;
        ogImage?: string;
        canonical?: string;
        ignoreTitleTemplate?: boolean;
    };
}

import Seo from "../components/seo/Seo.astro";
import Navbar from "../components/layout/Navbar.astro";
import Footer from "../components/layout/Footer.astro";
import "../styles/global.css";

const { title, description, ogImage, canonical, metadata } = Astro.props;

const finalTitle = metadata?.title || title;
const finalDescription = metadata?.description || description;
const finalOgImage = metadata?.ogImage || ogImage;
const finalCanonical = metadata?.canonical || canonical;
const finalIgnoreTitleTemplate = metadata?.ignoreTitleTemplate || false;
---

<!doctype html>
<html lang="es" class="scroll-smooth">
    <head>
        <Seo
            title={finalTitle}
            description={finalDescription}
            ogImage={finalOgImage}
            canonical={finalCanonical}
            ignoreTitleTemplate={finalIgnoreTitleTemplate}
        />
        <slot name="head" />
        <script is:inline>
            const getTheme = () => {
                if (
                    typeof localStorage !== "undefined" &&
                    localStorage.getItem("theme")
                ) {
                    return localStorage.getItem("theme");
                }
                if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                    return "dark";
                }
                return "light";
            };

            const theme = getTheme();
            if (theme === "light") {
                document.documentElement.setAttribute("data-theme", "light");
            } else {
                document.documentElement.setAttribute("data-theme", "dark");
            }
            window.localStorage.setItem("theme", theme);
        </script>
    </head>
    <body
        class="bg-background text-foreground antialiased selection:bg-blue-500/30 selection:text-blue-200"
    >
        <div class="relative flex min-h-screen flex-col overflow-x-hidden">
            <!-- Background Glow -->
            <div class="pointer-events-none absolute inset-0 z-0">
                <div
                    class="absolute -top-[10%] -left-[10%] h-[40%] w-[40%] rounded-full bg-blue-500/10 blur-[120px]"
                >
                </div>
                <div
                    class="absolute top-[40%] -right-[10%] h-[40%] w-[40%] rounded-full bg-purple-500/10 blur-[120px]"
                >
                </div>
            </div>

            <Navbar />
            <main class="relative z-10 flex-grow">
                <slot />
            </main>
            <Footer />
        </div>
    </body>
</html>
