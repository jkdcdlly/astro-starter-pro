---
import { siteConfig } from "../../config/site";
import ThemeToggle from "../ui/ThemeToggle.astro";
---

<nav class="fixed top-0 z-50 w-full border-b border-border bg-background">
    <div
        class="mx-auto flex max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-8"
    >
        <div class="flex items-center gap-2">
            <a
                href="/"
                class="text-xl font-bold tracking-tight text-foreground transition-colors hover:text-primary"
            >
                {siteConfig.name}
            </a>
        </div>

        <!-- Desktop Menu -->
        <div class="hidden md:block">
            <div class="ml-10 flex items-baseline space-x-8">
                <a
                    href="/"
                    class="text-sm font-medium text-foreground hover:text-primary transition-colors"
                    >Inicio</a
                >
                <a
                    href="/about"
                    class="text-sm font-medium text-foreground hover:text-primary transition-colors"
                    >Nosotros</a
                >
                <a
                    href="/services"
                    class="text-sm font-medium text-foreground hover:text-primary transition-colors"
                    >Servicios</a
                >
                <a
                    href="/blog"
                    class="text-sm font-medium text-foreground hover:text-primary transition-colors"
                    >Blog</a
                >
            </div>
        </div>

        <div class="hidden md:flex items-center gap-4">
            <a
                href="https://github.com/angelop47/astro-starter-template"
                target="_blank"
                rel="noopener noreferrer"
                class="rounded-full bg-foreground/10 px-4 py-2 text-sm font-semibold text-foreground transition-all hover:bg-foreground/20"
            >
                GitHub
            </a>
            <ThemeToggle />
        </div>

        <!-- Mobile Menu Button -->
        <div class="md:hidden flex items-center">
            <button
                id="mobile-menu-button"
                type="button"
                class="inline-flex items-center justify-center p-2 rounded-md text-foreground hover:text-white hover:bg-white/10 focus:outline-none transition-colors"
                aria-controls="mobile-menu"
                aria-expanded="false"
            >
                <span class="sr-only">Abrir men√∫ principal</span>
                <!-- Icon when menu is closed -->
                <svg
                    id="menu-icon-closed"
                    class="block h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    aria-hidden="true"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
                <!-- Icon when menu is open -->
                <svg
                    id="menu-icon-open"
                    class="hidden h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    aria-hidden="true"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <div class="ml-2">
                <ThemeToggle />
            </div>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div class="hidden md:hidden" id="mobile-menu">
        <div
            class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-background/90 border-b border-border"
        >
            <a
                href="/"
                class="block px-3 py-2 rounded-md text-base font-medium text-foreground hover:text-primary hover:bg-white/10 transition-colors"
                >Inicio</a
            >
            <a
                href="/about"
                class="block px-3 py-2 rounded-md text-base font-medium text-foreground hover:text-primary hover:bg-white/10 transition-colors"
                >Nosotros</a
            >
            <a
                href="/services"
                class="block px-3 py-2 rounded-md text-base font-medium text-foreground hover:text-primary hover:bg-white/10 transition-colors"
                >Servicios</a
            >
            <a
                href="/blog"
                class="block px-3 py-2 rounded-md text-base font-medium text-foreground hover:text-primary hover:bg-white/10 transition-colors"
                >Blog</a
            >
            <a
                href="https://github.com/angelop47/astro-starter-template"
                target="_blank"
                class="block px-3 py-2 rounded-md text-base font-medium text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 transition-colors"
                >GitHub</a
            >
        </div>
    </div>
</nav>

<script>
    const button = document.getElementById("mobile-menu-button");
    const menu = document.getElementById("mobile-menu");
    const iconClosed = document.getElementById("menu-icon-closed");
    const iconOpen = document.getElementById("menu-icon-open");

    button?.addEventListener("click", () => {
        const isExpanded = button.getAttribute("aria-expanded") === "true";

        button.setAttribute("aria-expanded", String(!isExpanded));
        menu?.classList.toggle("hidden");
        iconClosed?.classList.toggle("hidden");
        iconOpen?.classList.toggle("hidden");
    });
</script>
