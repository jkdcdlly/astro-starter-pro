---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { getImage } from "astro:assets";
import Content2 from "../../components/widgets/Content2.astro";
import Values from "../../components/widgets/Values.astro";
import aboutImage from "../../assets/images/about-office.webp";
import { useTranslations, getLangFromUrl } from "../../i18n";
import { ui, defaultLang } from "../../i18n";

// Export getStaticPaths function
export function getStaticPaths() {
  // Include all languages, including default language
  const languages = Object.keys(ui);
  
  return languages.map(lang => ({
    params: { lang },
    props: { lang },
  }));
}

// Get current language from URL
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const metadata = {
    title: t('about.title'),
    description: t('about.description'),
};

const values = [
    {
        title: t('about.values.innovation'),
        description: t('about.values.innovationDesc'),
    },
    {
        title: t('about.values.commitment'),
        description: t('about.values.commitmentDesc'),
    },
    {
        title: t('about.values.quality'),
        description: t('about.values.qualityDesc'),
    },
    {
        title: t('about.values.transparency'),
        description: t('about.values.transparencyDesc'),
    },
    {
        title: t('about.values.teamwork'),
        description: t('about.values.teamworkDesc'),
    },
    {
        title: t('about.values.excellence'),
        description: t('about.values.excellenceDesc'),
    },
];

const optimizedImage = await getImage({
    src: aboutImage,
    format: "webp",
});
---

<BaseLayout {metadata} lang={lang}>
    <link slot="head" rel="preload" href={optimizedImage.src} as="image" />
    <Content2
        title={t('about.vision.title')}
        description={[
            t('about.vision.description1'),
            t('about.vision.description2'),
        ]}
        tagline={t('about.tagline')}
        image={aboutImage}
        imageAlt="Modern web development office"
        actions={[
            {
                text: t('about.actions.contact'),
                href: `/${lang}/contact`,
                variant: "primary",
                icon: "lucide:mail",
            },
            {
                text: t('about.actions.viewDetails'),
                href: "#",
                variant: "secondary",
                icon: "lucide:arrow-right",
            },
        ]}
    />
    <Values
        items={values}
        columns={3}
        tagline={t('about.values.tagline')}
        title={t('about.values.title')}
        subtitle={t('about.values.subtitle')}
    />
</BaseLayout>