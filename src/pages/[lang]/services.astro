---
import BaseLayout from "@/layouts/BaseLayout.astro";
import ServiceList from "@/components/widgets/ServiceList.astro";
import Content from "@/components/widgets/Content.astro";
import Content2 from "@/components/widgets/Content2.astro";
import webDevImg from "@/assets/images/services/web-dev.webp";
import seoImg from "@/assets/images/services/seo.webp";
import consultingImg from "@/assets/images/services/consulting.webp";
import { useTranslations, getLangFromUrl } from "@/i18n";
import { ui, defaultLang } from "@/i18n";

// Export getStaticPaths function
export function getStaticPaths() {
  // Include all languages, including default language
  const languages = Object.keys(ui);
  
  return languages.map(lang => ({
    params: { lang },
    props: { lang },
  }));
}

// Get current language from URL
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const services = [
    {
        title: t('services.webDevelopment.title'),
        description: t('services.webDevelopment.description'),
        icon: "lucide:globe",
    },
    {
        title: t('services.seo.title'),
        description: t('services.seo.description'),
        icon: "lucide:search",
    },
    {
        title: t('services.consulting.title'),
        description: t('services.consulting.description'),
        icon: "lucide:rocket",
    },
];

const metadata = {
    title: t('services.title'),
    description: t('services.description'),
};
---

<BaseLayout {metadata} lang={lang}>
    <Content
        tagline={t('services.tagline')}
        title={t('services.title')}
        description={[
            t('services.intro.description'),
        ]}
    />
    <ServiceList services={services} classes={{ container: "pt-0 md:pt-0" }} />
    <Content
        tagline={t('services.webDevelopment.tagline')}
        title={t('services.webDevelopment.title')}
        description={[
            t('services.webDevelopment.longDescription'),
        ]}
        classes={{ container: "pb-0 md:pb-0" }}
    />
    <Content2
        items={[
            {
                title: t('services.webDevelopment.responsive'),
                description: t('services.webDevelopment.responsiveDesc'),
            },
            {
                title: t('services.webDevelopment.performance'),
                description: t('services.webDevelopment.performanceDesc'),
            },
        ]}
        image={webDevImg}
        imageAlt="Modern Web Development"
        classes={{ container: "pt-0 md:pt-0" }}
    >
        <>
            <h3 class="text-2xl font-bold tracking-tight sm:text-3xl mb-2">
                {t('services.webDevelopment.title')}
            </h3>
            {t('services.webDevelopment.longDescription')}
        </>
    </Content2>

    <Content2
        isReversed={true}
        items={[
            {
                title: t('services.seo.audit'),
                description: t('services.seo.auditDesc'),
            },
            {
                title: t('services.seo.content'),
                description: t('services.seo.contentDesc'),
            },
        ]}
        image={seoImg}
        imageAlt="SEO Strategies"
    >
        <>
            <h3 class="text-2xl font-bold tracking-tight sm:text-3xl mb-2">
                {t('services.seo.title')}
            </h3>
            {t('services.seo.longDescription')}
        </>
    </Content2>

    <Content2
        items={[
            {
                title: t('services.consulting.transformation'),
                description: t('services.consulting.transformationDesc'),
            },
            {
                title: t('services.consulting.architecture'),
                description: t('services.consulting.architectureDesc'),
            },
        ]}
        image={consultingImg}
        imageAlt="Technology Consulting"
    >
        <>
            <h3 class="text-2xl font-bold tracking-tight sm:text-3xl mb-2">
                {t('services.consulting.title')}
            </h3>
            {t('services.consulting.longDescription')}
        </>
    </Content2>
</BaseLayout>